<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quotation – {{ quotation_number }}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* ====================================================
           RESET & BASE
           ==================================================== */
        * { margin:0; padding:0; box-sizing:border-box; }

        body {
            font-family:'Poppins','Segoe UI',Tahoma,Geneva,Verdana,sans-serif;
            line-height:1.6; color:#333; background:#f5f7fa; padding:20px;
        }
        .container { max-width:1200px; margin:0 auto; }

        /* ── print-control bar ── */
        .print-controls {
            background:#fff; padding:20px; border-radius:10px;
            box-shadow:0 4px 15px rgba(0,0,0,.08); margin-bottom:25px;
            display:flex; justify-content:space-between; align-items:center;
            flex-wrap:wrap; gap:15px;
        }
        .controls-left h1 {
            font-size:24px; color:#2c3e50; margin-bottom:5px;
            display:flex; align-items:center; gap:10px;
        }
        .controls-left h1 i { color:#3498db; }
        .controls-right { display:flex; gap:12px; flex-wrap:wrap; }

        /* ── buttons ── */
        .btn {
            padding:12px 24px; border:none; border-radius:8px; cursor:pointer;
            font-weight:600; font-size:15px; transition:all .3s;
            display:flex; align-items:center; gap:8px;
            text-decoration:none; min-width:120px; justify-content:center;
        }
        .btn-primary   { background:linear-gradient(135deg,#3498db,#2980b9); color:#fff; }
        .btn-primary:hover   { background:linear-gradient(135deg,#2980b9,#2573a7); transform:translateY(-2px); box-shadow:0 6px 15px rgba(52,152,219,.3); }
        .btn-success   { background:linear-gradient(135deg,#2ecc71,#27ae60); color:#fff; }
        .btn-success:hover   { background:linear-gradient(135deg,#27ae60,#219653); transform:translateY(-2px); box-shadow:0 6px 15px rgba(46,204,113,.3); }
        .btn-secondary { background:linear-gradient(135deg,#95a5a6,#7f8c8d); color:#fff; }
        .btn-secondary:hover { background:linear-gradient(135deg,#7f8c8d,#718093); transform:translateY(-2px); box-shadow:0 6px 15px rgba(149,165,166,.3); }

        /* ====================================================
           QUOTATION WRAPPER
           ==================================================== */
        .quotation-container {
            background:#fff; border-radius:10px;
            box-shadow:0 5px 20px rgba(0,0,0,.1);
            overflow:hidden; margin-bottom:30px;
        }

        /* ====================================================
           CONSISTENT HEADER FOR ALL PAGES
           ==================================================== */
        .page-header {
            display:flex;
            align-items:center;
            justify-content:space-between;
            padding:20px;
            border-bottom:3px solid #050505;
            margin-bottom:40px;
        }

        /* ✅ CONSISTENT LOGO SIZE FOR ALL PAGES */
        .page-logo {
            width:300px;
            height:150px;
            display:flex;
            align-items:center;
            justify-content:center;
            border-radius:10px;
            color:#3498db;
            font-size:48px;
            flex-shrink:0;
            padding:10px;
            overflow:hidden;
            background:#fff;
        }
        .page-logo img {
            width:100%;
            height:100%;
            object-fit:contain;
            border-radius:8px;
        }
        /* ✅ Show icon only when no logo */
        .page-logo.no-logo {
            background:linear-gradient(135deg,#3498db,#2980b9);
            color:#fff;
        }

        .page-header-content {
            flex:1;
            text-align:right;
        }
        .page-header-content .website {
            color:#3498db;
            font-weight:600;
            margin-bottom:10px;
            font-size:16px;
        }
        .page-header-content h1 {
            font-size:28px;
            color:#2c3e50;
            margin-bottom:10px;
        }
        .page-header-content p {
            color:#555;
            margin-bottom:5px;
            display:flex;
            align-items:center;
            justify-content:flex-end;
            gap:8px;
        }

        /* ====================================================
           IMC LETTER PAGE  (page 1)
           ==================================================== */
        .imc-letter-page {
            min-height:100vh; padding:60px 40px; background:#fff; color:#333;
            position:relative; overflow:hidden;
        }

        .imc-letter-client-info { padding:20px; border-radius:8px; margin:20px 0; }
        .imc-letter-client-info p { margin-bottom:5px; }

        .greeting-text { margin:15px 0; font-size:16px; }

        .imc-letter-salutation { margin:20px 0; font-weight:600; }

        .imc-letter-content { margin:30px 0; line-height:1.8; }
        .imc-letter-content p { margin-bottom:15px; }

        .imc-letter-signature { margin-top:60px; text-align:left; }
        .imc-letter-signature p { margin-bottom:5px; }

        /* ====================================================
           QUOTATION DETAIL PAGE  (page 2)
           ==================================================== */
        .page-break {
            page-break-before:always;
            border-top:1px dashed #090909; margin-top:20px; padding-top:20px;
        }

        .quotation-header {
            color:rgb(22,21,21); padding:30px;
            display:flex; justify-content:space-between;
            align-items:flex-start; flex-wrap:wrap; gap:30px;
        }

        /* ── customer info box on right side ── */
        .customer-info {
            flex: 1;
            min-width: 300px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.05);
        }

        .customer-info h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .customer-details {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            align-items: center;
        }

        .customer-details div {
            display: flex;
            align-items: center;
            gap: 5px;
            white-space: nowrap;
        }

        .customer-details strong {
            color: #555;
            font-size: 14px;
            margin-bottom: 0;
        }

        .customer-details span {
            color: #2c3e50;
            font-size: 15px;
        }

        /* ── quotation metadata ── */
        .quotation-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            padding: 20px 30px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            border-bottom: 1px solid #e9ecef;
        }

        .meta-item {
            display: flex;
            flex-direction: column;
        }

        .meta-item strong {
            color: #555;
            font-size: 13px;
            margin-bottom: 5px;
        }

        .meta-item span {
            color: #2c3e50;
            font-size: 16px;
            font-weight: 600;
        }

        /* ── items table ── */
        .items-section {
            padding: 30px;
        }

        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            font-size: 14px;
        }

        .items-table thead {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }

        .items-table th {
            padding: 12px 8px;
            text-align: left;
            font-weight: 600;
        }

        .items-table th.text-center { text-align: center; }
        .items-table th.text-right { text-align: right; }

        .items-table tbody tr {
            border-bottom: 1px solid #e9ecef;
        }

        .items-table tbody tr:nth-child(even) {
            background: #f8f9fa;
        }

        .items-table tbody tr:hover {
            background: #e3f2fd;
        }

        .items-table td {
            padding: 12px 8px;
        }

        .items-table td.text-center { text-align: center; }
        .items-table td.text-right { text-align: right; }

        .item-name {
            font-weight: 600;
            color: #2c3e50;
        }

        .item-description {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 4px;
        }

        /* ── totals section ── */
        .totals-section {
            padding: 20px 30px;
            display: flex;
            justify-content: flex-end;
        }

        .totals-table {
            min-width: 300px;
            font-size: 15px;
            border-collapse: collapse;
        }

        .totals-table tr {
            border-bottom: 1px solid #e9ecef;
        }

        .totals-table td {
            padding: 8px 0;
        }

        .totals-label {
            text-align: right;
            color: #555;
            font-weight: 500;
            padding-right: 15px;
            white-space: nowrap;
        }

        .totals-value {
            text-align: right;
            font-weight: 600;
            color: #2c3e50;
            white-space: nowrap;
            min-width: 120px;
        }

        .grand-total-row {
            border-top: 2px solid #2c3e50;
            margin-top: 5px;
            padding-top: 10px;
        }

        .grand-total-row .totals-label,
        .grand-total-row .totals-value {
            color: #2c3e50;
            font-size: 16px;
            font-weight: 700;
            padding-top: 10px;
        }

        .grand-total-row td {
            padding: 12px 0 !important;
        }

        .grand-total-row .totals-label {
            padding-right: 0;
        }

        /* ── notes ── */
        .notes-section {
            padding: 20px 30px;
        }

        .notes-box {
            padding: 15px 20px;
            border-radius: 5px;
        }

        .notes-box h4 {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .notes-content {
            color: #333;
            line-height: 1.6;
        }

        /* ── signatures ── */
        .signature-section {
            padding: 40px 30px;
            display: flex;
            justify-content: space-between;
            gap: 30px;
            flex-wrap: wrap;
        }

        .signature-box {
            flex: 1;
            min-width: 200px;
            text-align: center;
        }

        .signature-line {
            height: 60px;
            border-bottom: 2px solid #2c3e50;
            margin-bottom: 10px;
        }

        .signature-label {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .signature-details {
            font-size: 12px;
            color: #7f8c8d;
            text-align: left;
            line-height: 1.8;
        }

        /* ── footer info ── */
        .footer-info {
            padding: 20px 30px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            text-align: center;
            font-size: 13px;
            color: #7f8c8d;
        }

        .footer-info p {
            margin-bottom: 5px;
        }

        /* ====================================================
           TERMS & CONDITIONS PAGE (page 3)
           ==================================================== */
        .imc-terms-page {
            page-break-before: always;
            min-height: 100vh;
            padding: 30px 25px;
            background: #fff;
            page-break-inside: avoid;
        }

        .imc-terms-content {
            line-height: 1.6;
            page-break-inside: avoid;
        }

        .imc-terms-content h2 {
            font-size: 20px;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            text-transform: uppercase;
            border-bottom: 2px solid #3498db;
            padding-bottom: 8px;
            page-break-after: avoid;
        }

        .imc-terms-content h3 {
            font-size: 25px;
            color: #e38c5f;
            margin-left: 50px;
            margin-top: 18px;
            margin-bottom: 8px;
            page-break-after: avoid;
        }

        .imc-terms-content p {
            color: #555;
            font-size: 20px;
            margin-left: 100px;
            margin-right: 100px;
            text-align: justify;
            line-height: 1.5;
        }

        /* ====================================================
           PRINT STYLES
           ==================================================== */
        @media print {
            body {
                background: #fff;
                padding: 0;
            }

            .print-controls {
                display: none !important;
            }

            .quotation-container {
                box-shadow: none;
                border-radius: 0;
            }

            .page-break {
                page-break-before: always;
                border-top: none;
                margin-top: 0;
                padding-top: 0;
            }

            .imc-terms-page {
                page-break-before: always !important;
                padding: 15px 20px !important;
                min-height: auto;
            }

            /* Consistent header sizing for print */
            .page-logo {
                width: 200px !important;
                height: 100px !important;
                font-size: 36px !important;
            }
            
            .page-header-content h1 {
                font-size: 22px !important;
            }
            
            .page-header-content p {
                font-size: 12px !important;
            }
            
            .page-header-content .website {
                font-size: 14px !important;
            }

            /* Ensure logos print properly */
            .page-logo img {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            
            /* Terms page print optimization */
            .imc-terms-content h2 {
                font-size: 16px !important;
                margin-bottom: 12px !important;
            }
            
            .imc-terms-content h3 {
                font-size: 18px !important;
                margin-top: 14px !important;
                margin-bottom: 6px !important;
            }
            
            .imc-terms-content p {
                font-size: 16px !important;
                margin-bottom: 10px !important;
                line-height: 1.4 !important;
                text-align: left !important;
            }
        }
    </style>
</head>
<body>

<div class="container">
    <!-- ============================================================
         PRINT CONTROLS (hidden in print)
         ============================================================ -->
    <div class="print-controls">
        <div class="controls-left">
            
            <p style="color:#7f8c8d; font-size:14px;">
                {{ company_name }} | Valid Until: {{ valid_until }}
            </p>
        </div>
        <div class="controls-right">
            <button onclick="window.print()" class="btn btn-primary">
                <i class="fas fa-print"></i>
                Print
            </button>
            <button onclick="window.print()" class="btn btn-success">
                <i class="fas fa-download"></i>
                Save as PDF
            </button>
            <a href="{% url 'app5:quotation_form' %}" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i>
                Back to List
            </a>
        </div>
    </div>

    <div class="quotation-container">
        <!-- ================================================
             PAGE 1 – COVER LETTER (IMC-style)
             ================================================ -->
        <div class="imc-letter-page">
            <!-- ✅ CONSISTENT HEADER: Logo on LEFT, Details on RIGHT -->
            <div class="page-header">
                <!-- Logo Section on LEFT -->
                <div class="page-logo {% if not company_has_logo %}no-logo{% endif %}">
                    {% if company_has_logo %}
                        <img src="{{ company_logo_url }}" alt="{{ company_name }} Logo">
                    {% else %}
                        <i class="fas fa-building"></i>
                    {% endif %}
                </div>

                <!-- Company Details on RIGHT -->
                <div class="page-header-content">
                    {% if company_email %}
                    <div class="website">{{ company_email }}</div>
                    {% endif %}
                    <h1>{{ company_name }}</h1>
                    {% if company_address %}
                    <p><i class="fas fa-map-marker-alt"></i> {{ company_address }}</p>
                    {% endif %}
                    {% if company_contact %}
                    <p><i class="fas fa-phone"></i> {{ company_contact }}</p>
                    {% endif %}
                    {% if company_gst %}
                    <p><i class="fas fa-file-invoice"></i> GST: {{ company_gst }}</p>
                    {% endif %}
                </div>
            </div>

            <!-- Client Info -->
            <div class="imc-letter-client-info">
               <p><strong>{{ client_name|default:"Valued Customer" }}</strong></p>
               {% if lead_data.customerType == 'Business' %}
                    {% if lead_data.place %}
                    <p>{{ lead_data.place }}</p>
                    {% else %}
                    <p> Address not provided</p>
                    {% endif %}
                {% else %}
                    {% if lead_data.individualPlace %}
                    <p>{{ lead_data.individualPlace }}</p>
                    {% else %}
                    <p> Address not provided</p>
                    {% endif %}
                {% endif %}
                {% if client_phone %}
                <p>{{ client_phone }}</p>
                {% endif %}
            </div>
            
             <!-- Salutation -->
            <div class="imc-letter-salutation" style="text-align: center; color: brown;font-size: 25px;">
                <p><strong>Warm Greetings From {{ company_name }}</strong></p>
            </div>

            <!-- Greeting -->
            <div class="greeting-text" style="font-weight: bold;font-size: larger;">
                <p>Sir {{ client_name|default:"Valued Customer" }},</p>
            </div>

            <!-- Letter Content -->
            <div class="imc-letter-content" style="text-align:left;font-size: 20px;margin-left: 7%;margin-right: 7%;">
                <p>
                    Thank you for the time you have given in allowing us to discuss with you the opportunity
                    how our software may assist your organization further progressing your productivity and
                    outputs. As agreed, we are submitting to you information about us and our proposed plan
                    to action for your review.
                </p>

                <p>
                    IMC Business Solutions is a comprehensive platform that supports overall Business
                    solutions like ERP Softwares, Web Solutions, Mobile Applications, Digital Marketing,
                    Branding, and Business Consultation.
                </p>

                <p>
                    Here we are attaching the detailed quotation. We are expecting to have a journey together
                    to reach your success.
                </p>
            </div>

            <div style="margin-top: 50px;border-top:3px solid #090909;  text-align: left; font-size: 16px; line-height: 1.6;">
                <div><strong>Date:</strong> {{ created_date|default:"Date not specified" }}</div>
                <div><strong>Place:Kalpetta</strong></div>
            </div>
        </div>

        <!-- ================================================
             PAGE 2 – QUOTATION DETAILS
             ================================================ -->
        <div class="page-break"></div>

        <!-- ✅ CONSISTENT HEADER: Logo on LEFT, Details on RIGHT -->
        <div class="page-header">
            <!-- Logo Section on LEFT -->
            <div class="page-logo {% if not company_has_logo %}no-logo{% endif %}">
                {% if company_has_logo %}
                    <img src="{{ company_logo_url }}" alt="{{ company_name }} Logo">
                {% else %}
                    <i class="fas fa-building"></i>
                {% endif %}
            </div>

            <!-- Company Details on RIGHT -->
            <div class="page-header-content">
                {% if company_email %}
                <div class="website">{{ company_email }}</div>
                {% endif %}
                <h1>{{ company_name }}</h1>
                {% if company_address %}
                <p><i class="fas fa-map-marker-alt"></i> {{ company_address }}</p>
                {% endif %}
                {% if company_contact %}
                <p><i class="fas fa-phone"></i> {{ company_contact }}</p>
                {% endif %}
                {% if company_gst %}
                <p><i class="fas fa-file-invoice"></i> GST: {{ company_gst }}</p>
                {% endif %}
            </div>
        </div>

        <!-- Customer Info Box -->
        <div class="customer-info">
            <h3>
                <i class="fas fa-user-circle"></i>
                Customer Details
            </h3>
            <div class="customer-details">
                <div>
                    <strong>Name:</strong>
                    <span>{{ client_name|default:"Not Specified" }}</span>
                </div>

                <div>
                    <strong>Address:</strong>
                    <span>
                        {% if lead_data.customerType == 'Business' %}
                            {{ lead_data.place|default:"Not provided" }}
                        {% else %}
                            {{ lead_data.individualPlace|default:"Not provided" }}
                        {% endif %}
                    </span>
                </div>
                {% if client_phone %}
                <div>
                    <strong>Phone:</strong>
                    <span>{{ client_phone }}</span>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Items Table -->
        <div class="items-section">
            <h2 style="color:#2c3e50; margin-bottom:20px; font-size:22px;">
                <i class="fas fa-list-ul"></i> Items & Services
            </h2>

            <table class="items-table">
                <thead>
                    <tr>
                        <th width="50" class="text-center">#</th>
                        <th>Item Description</th>
                        <th width="80" class="text-center">Qty</th>
                        <th width="120" class="text-right">Rate</th>
                        <th width="120" class="text-right">Unit Price</th>
                        <th width="80" class="text-right">Tax %</th>
                        <th width="120" class="text-right">Tax Amount</th>
                        <th width="120" class="text-right">Amount</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                    <tr>
                        <td class="text-center">{{ forloop.counter }}</td>
                        <td>
                            <div class="item-name">{{ item.item_name }}</div>
                            {% if item.description %}
                            <div class="item-description">{{ item.description }}</div>
                            {% endif %}
                        </td>
                        <td class="text-center">{{ item.quantity }}</td>
                        <td class="text-right">₹{{ item.sales_price|floatformat:2 }}</td>
                        <td class="text-right">₹{{ item.unit_price|floatformat:2 }}</td>
                        <td class="text-right">{{ item.tax_percentage|floatformat:2 }}%</td>
                        <td class="text-right">₹{{ item.tax_amount|floatformat:2 }}</td>
                        <td class="text-right">₹{{ item.sales_price|floatformat:2 }}</td>
                    </tr>
                    {% empty %}
                    <tr><td colspan="8" class="text-center">No items added to this quotation</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Totals Section -->
        <div class="totals-section">
            <table class="totals-table">
                <tr>
                    <td class="totals-label">Subtotal:</td>
                    <td class="totals-value">{{ subtotal }}</td>
                </tr>
                <tr>
                    <td class="totals-label">Total Tax:</td>
                    <td class="totals-value">{{ total_tax }}</td>
                </tr>
                <tr>
                    <td class="totals-label">Discount:</td>
                    <td class="totals-value">-{{ discount_amount }}</td>
                </tr>
                {% if shipping_charges %}
                <tr>
                    <td class="totals-label">Shipping:</td>
                    <td class="totals-value">{{ shipping_charges }}</td>
                </tr>
                {% endif %}
                <!-- Grand Total -->
                <tr class="grand-total-row">
                    <td colspan="2" style="padding: 15px 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
                            <div style="text-align: left; flex: 1; padding-right: 500px;">
                                <div style="font-weight: 600; color: #2c3e50; margin-bottom: 5px; font-size: 14px;">Grand Total (in words):</div>
                                <div id="amountInWords" style="font-style: italic; color: #2c3e50; font-size: 13px; line-height: 1.4;">
                                    Rupees ________ Only
                                </div>
                            </div>
                            <div style="text-align: right; flex-shrink: 0;">
                                <div style="font-weight: 700; color: rgb(11, 11, 11); font-size: 18px;">
                                    {{ grand_total }}
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </div>

        <!-- Notes Section -->
        {% if quotation.notes %}
        <div class="notes-section">
            <div class="notes-box">
                <h4><i class="fas fa-sticky-note"></i> Notes</h4>
                <div class="notes-content">{{ quotation.notes|linebreaks }}</div>
            </div>
        </div>
        {% endif %}

        <!-- Footer Info -->
        <div class="footer-info">
            <p>Thank you for your business! For queries contact us at
                {% if company_email %}{{ company_email }}{% endif %}
                {% if company_contact %} or call {{ company_contact }}{% endif %}
            </p>
            <p>This is a computer-generated quotation and does not require a physical signature until acceptance</p>
        </div>

        <!-- ================================================
             PAGE 3 – TERMS & CONDITIONS
             ================================================ -->
        <div class="imc-terms-page">
            <!-- ✅ CONSISTENT HEADER: Logo on LEFT, Details on RIGHT -->
            <div class="page-header">
                <!-- Logo Section on LEFT -->
                <div class="page-logo {% if not company_has_logo %}no-logo{% endif %}">
                    {% if company_has_logo %}
                        <img src="{{ company_logo_url }}" alt="{{ company_name }} Logo">
                    {% else %}
                        <i class="fas fa-building"></i>
                    {% endif %}
                </div>

                <!-- Company Details on RIGHT -->
                <div class="page-header-content">
                    <h1>{{ company_name }}</h1>
                    {% if company_address %}<p><i class="fas fa-map-marker-alt"></i> {{ company_address }}</p>{% endif %}
                    {% if company_contact %}<p><i class="fas fa-phone"></i> {{ company_contact }}</p>{% endif %}
                    {% if company_email %}<p><i class="fas fa-envelope"></i> {{ company_email }}</p>{% endif %}
                </div>
            </div>

            <!-- Client Info (simplified) -->
            <div style="margin-bottom: 20px; font-size: 14px;">
                <strong>Customer:</strong> {{ client_name|default:"Not Specified" }}
                {% if client_phone %}| <strong>Phone:</strong> {{ client_phone }}{% endif %}
                {% if lead_data.customerType == 'Business' %}
                    | <strong>Address:</strong> {{ lead_data.place|default:"Not provided" }}
                {% else %}
                    | <strong>Address:</strong> {{ lead_data.individualPlace|default:"Not provided" }}
                {% endif %}
            </div>

            <!-- Terms Content -->
            <div class="imc-terms-content">
                <h2>TERMS AND CONDITIONS</h2>

                <h3>1. Scope of Services:</h3>
                <p>{{ company_name }} provides various types of services to clients based on their requirements. The specific services will be detailed in the service agreement.</p>

                <h3>2. Payment Terms:</h3>
                <p>Payment for services will be made according to the agreed-upon schedule. An advance of 50% is required upon order confirmation, with the balance due upon completion of services. If you are not satisfied with your purchase, you may request a full refund within 10 days.</p>

                <h3>3. Confidentiality:</h3>
                <p>Both parties agree to keep all information shared during the course of the agreement confidential. This includes client data, marketing strategies, and any proprietary information.</p>

                <h3>4. Warranty and Limitation of Liability:</h3>
                <p>{{ company_name }} warrants that its services will be performed in a professional and workmanlike manner. However, the company is not liable for any indirect, incidental, or consequential damages.</p>

                <h3>5. Termination:</h3>
                <p>Either party may terminate the agreement with written notice. In the event of termination, the client will be responsible for any unpaid fees for services rendered up to the termination date.</p>

                <h3>6. Governing Law:</h3>
                <p>These terms and conditions are governed by the laws of the jurisdiction in which the company operates. The company reserves the right to modify these terms and conditions at any time. Clients will be notified of any changes.</p>
            </div>
        </div>

    </div><!-- /quotation-container -->
</div><!-- /container -->

<!-- ============================================================
     JAVASCRIPT  –  Number to words conversion
     ============================================================ -->
<script>
// Function to convert number to words (Indian Numbering System)
function numberToWords(num) {
    const ones = ['', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine'];
    const teens = ['Ten', 'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Nineteen'];
    const tens = ['', '', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];
    
    if (num === 0) return 'Zero';
    
    let rupees = Math.floor(num);
    let paise = Math.round((num - rupees) * 100);
    
    function convertLessThanThousand(n) {
        if (n === 0) return '';
        if (n < 10) return ones[n];
        if (n < 20) return teens[n - 10];
        if (n < 100) return tens[Math.floor(n / 10)] + (n % 10 !== 0 ? ' ' + ones[n % 10] : '');
        return ones[Math.floor(n / 100)] + ' Hundred' + (n % 100 !== 0 ? ' and ' + convertLessThanThousand(n % 100) : '');
    }
    
    function convertIndian(num) {
        let result = '';
        let crore = Math.floor(num / 10000000);
        num %= 10000000;
        let lakh = Math.floor(num / 100000);
        num %= 100000;
        let thousand = Math.floor(num / 1000);
        num %= 1000;
        
        if (crore > 0) result += convertLessThanThousand(crore) + ' Crore ';
        if (lakh > 0) result += convertLessThanThousand(lakh) + ' Lakh ';
        if (thousand > 0) result += convertLessThanThousand(thousand) + ' Thousand ';
        if (num > 0) result += convertLessThanThousand(num);
        
        return result.trim();
    }
    
    let words = rupees > 0 ? convertIndian(rupees) : '';
    let result = words ? 'Rupees ' + words : '';
    
    if (paise > 0) {
        result += (result ? ' and ' : '') + convertLessThanThousand(paise) + ' Paise';
    }
    
    return result ? result + ' Only' : 'Rupees Zero Only';
}

// Extract grand total and update words
function updateAmountInWords() {
    // Try to extract from the grand total number in the totals table
    const grandTotalElement = document.querySelector('.grand-total-row .totals-value');
    if (!grandTotalElement) {
        // Alternative: look for the grand total number in the updated layout
        const grandTotalDiv = document.querySelector('.grand-total-row div div:last-child div');
        if (grandTotalDiv) {
            const text = grandTotalDiv.textContent.trim();
            const numericValue = parseFloat(text.replace(/[^0-9.]/g, ''));
            
            if (!isNaN(numericValue)) {
                const words = numberToWords(numericValue);
                const amountInWordsElement = document.getElementById('amountInWords');
                if (amountInWordsElement) {
                    amountInWordsElement.textContent = words;
                }
            }
        }
        return;
    }
    
    const text = grandTotalElement.textContent.trim();
    const numericValue = parseFloat(text.replace(/[^0-9.]/g, ''));
    
    if (!isNaN(numericValue)) {
        const words = numberToWords(numericValue);
        const amountInWordsElement = document.getElementById('amountInWords');
        if (amountInWordsElement) {
            amountInWordsElement.textContent = words;
        }
    }
}

// Update when page loads
document.addEventListener('DOMContentLoaded', updateAmountInWords);
</script>

<!-- ============================================================
     JAVASCRIPT  –  print shortcuts
     ============================================================ -->
<script>
document.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && (e.key === 'p' || e.key === 's')) {
        e.preventDefault();
        window.print();
    }
    if (e.key === 'Escape') {
        window.history.back();
    }
});
</script>
</body>
</html>