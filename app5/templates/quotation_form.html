<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quotation Template</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Previous CSS remains the same */
        
        /* Updated styles for the client info section */
        .client-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #f8f9ff, #e8f0ff);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #4a6fdc;
            box-shadow: 0 4px 12px rgba(74, 111, 220, 0.1);
        }
        
        .client-info > div {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .form-group {
            margin-bottom: 0;
        }
        
        .client-info label {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .client-info input {
            background-color: white;
            border: 1px solid #d1d9ff;
            border-radius: 6px;
            padding: 12px 15px;
            font-size: 15px;
            transition: all 0.3s ease;
        }
        
        .client-info input:focus {
            border-color: #4a6fdc;
            box-shadow: 0 0 0 3px rgba(74, 111, 220, 0.2);
            outline: none;
        }
        
        /* Updated styles for action buttons */
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            justify-content: flex-end;
            padding: 15px;
            background: linear-gradient(to right, #e8f5e8, #d4edda);
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }
        
        .btn-add {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(40, 167, 69, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-add:hover {
            background: linear-gradient(135deg, #218838, #1ea085);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(40, 167, 69, 0.4);
        }
        
        .btn-add i {
            font-size: 14px;
        }
        
        /* New Create button styles */
        .btn-create {
            background: linear-gradient(135deg, #4a6fdc, #3a5fc8);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(74, 111, 220, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-create:hover {
            background: linear-gradient(135deg, #3a5fc8, #2a4fb4);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(74, 111, 220, 0.4);
        }
        
        .btn-create i {
            font-size: 14px;
        }
        
        /* New Submit button styles */
        .btn-submit {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(23, 162, 184, 0.3);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-submit:hover {
            background: linear-gradient(135deg, #138496, #117a8b);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(23, 162, 184, 0.4);
        }
        
        .btn-submit i {
            font-size: 14px;
        }
        
        /* Updated styles for items table */
        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .items-table th {
            background: linear-gradient(135deg, #f8861b, #f8861b);
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
            border: none;
        }
        
        .items-table td {
            padding: 12px;
            border-bottom: 1px solid #f8861b;
            background-color: #ffe9cc;
        }
        
        .items-table tr:nth-child(even) td {
            background-color: #f8f9ff;
        }
        
        .items-table tr:hover td {
            background-color: #e3f2fd;
        }
        
        .items-table input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        .items-table input:focus {
            border-color: #4a6fdc;
            outline: none;
        }
        
        .btn-delete {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .btn-delete:hover {
            background: linear-gradient(135deg, #c0392b, #a93226);
            transform: translateY(-2px);
        }
        
        .btn-delete i {
            font-size: 12px;
        }
        
        /* Updated styles for totals section */
        .totals-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-top: 20px;
        }
        
        .notes-section {
            background: linear-gradient(135deg, #fffaf0, #fff5e6);
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #e67e22;
            box-shadow: 0 4px 12px rgba(230, 126, 34, 0.1);
        }
        
        .notes-section label {
            color: #2c3e50;
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
            font-size: 16px;
        }
        
        textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ffddb3;
            border-radius: 6px;
            min-height: 120px;
            font-size: 15px;
            background-color: white;
            transition: border-color 0.3s;
        }
        
        textarea:focus {
            border-color: #e67e22;
            outline: none;
            box-shadow: 0 0 0 3px rgba(230, 126, 34, 0.2);
        }
        
        .totals-box {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
        }
        
        .totals-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 16px;
        }
        
        .grand-total {
            font-size: 22px;
            font-weight: bold;
            color: white;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid rgba(255, 255, 255, 0.3);
            display: flex;
            justify-content: space-between;
        }
        
        /* Updated styles for footer */
        .footer {
            margin-top: 30px;
            text-align: center;
            padding: 25px;
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .footer p {
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .footer p:first-child {
            font-weight: 600;
            font-size: 18px;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .client-info {
                grid-template-columns: 1fr;
            }
            
            .totals-section {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                justify-content: center;
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-content">
            <!-- Left Column - Lead Directory -->
            <div class="directory-column">
                <!-- Directory content remains the same -->
            </div>
            
            <!-- Right Column - Quotation Form -->
            <div class="form-column">
                <div class="form-container">
                    <div class="form-header">
                        <h1>Quotation Form</h1>
                        <p>Create professional quotations for your clients</p>
                    </div>
                    
                    <!-- Navigation Menu -->
                    <div class="form-navigation">
                        <!-- Navigation content remains the same -->
                    </div>
                    
                    <div class="form-body">
                        <div class="header">
                            <div class="company-info">
                                <h1>SYSMAC Computers</h1>
                                <p>>Emily - Kalpetta, Wayanad</p>
                                <p>Phone: 7591 907 004 | Email: care.sysmac@gmail.com</p>
                            </div>
                            <div class="quotation-info">
                                <h2>QUOTATION</h2>
                                <p><strong>Quotation #:</strong> <span id="quote-number">QT-2023-001</span></p>
                                <p><strong>Date:</strong> <span id="quote-date">01/01/2023</span></p>
                                <p><strong>Valid Until:</strong> <span id="valid-until">01/31/2023</span></p>
                            </div>
                        </div>

                        <!-- Updated Client Info Section -->
                        <div class="client-info">
                            <div>
                                <div class="form-group">
                                    <label for="client-name">Client Name</label>
                                    <input type="text" id="client-name" placeholder="Enter client name">
                                </div>
                                <div class="form-group">
                                    <label for="client-address">Client Address</label>
                                    <input type="text" id="client-address" placeholder="Enter client address">
                                </div>
                            </div>
                            <div>
                                <div class="form-group">
                                    <label for="client-email">Client Email</label>
                                    <input type="email" id="client-email" placeholder="Enter client email">
                                </div>
                                <div class="form-group">
                                    <label for="client-phone">Client Phone</label>
                                    <input type="text" id="client-phone" placeholder="Enter client phone">
                                </div>
                            </div>
                        </div>

                        <!-- Updated Action Buttons with Create and Submit buttons -->
                        <div class="action-buttons">
                            <button class="btn-add" onclick="addNewItem()">
                                <i class="fas fa-plus-circle"></i> Add New Item
                            </button>
                            <button class="btn-create" onclick="createQuotation()">
                                <i class="fas fa-file-alt"></i> Create Quotation
                            </button>
                            
                        </div>

                        <!-- Updated Items Table -->
                        <table class="items-table">
                            <thead>
                                <tr>
                                    <th>Item Description</th>
                                    <th>Qty</th>
                                    <th>Entry Rate</th>
                                    <th>Sales Price</th>
                                    <th>Unit Price</th>
                                    <th>Discount (%)</th>
                                    <th>Tax (%)</th>
                                    <th>Total</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="items-body">
                                <!-- Items will be added here dynamically -->
                            </tbody>
                        </table>

                        <!-- Updated Totals Section -->
                        <div class="totals-section">
                            <div class="notes-section">
                                <label for="notes">Notes</label>
                                <textarea id="notes" placeholder="Add any additional notes or terms here..."></textarea>

                                <button class="btn-submit" onclick="submitQuotation()">
                                <i class="fas fa-paper-plane"></i> Submit Quotation
                            </button>
                            </div>
                            <div class="totals-box">
                                <div class="totals-row">
                                    <span>Subtotal:</span>
                                    <span id="subtotal">$0.00</span>
                                </div>
                                <div class="totals-row">
                                    <span>Total Discount:</span>
                                    <span id="total-discount">$0.00</span>
                                </div>
                                <div class="totals-row">
                                    <span>Total Tax:</span>
                                    <span id="total-tax">$0.00</span>
                                </div>
                                <div class="grand-total">
                                    <span>Grand Total:</span>
                                    <span id="grand-total">$0.00</span>
                                </div>
                            </div>
                        </div>

                        <!-- Updated Footer -->
                        <div class="footer">
                            <p>Thank you for your business!</p>
                            <p>This quotation is valid until the date specified above.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set current date
        document.getElementById('quote-date').textContent = new Date().toLocaleDateString();
        
        // Set valid until date (30 days from now)
        const validUntil = new Date();
        validUntil.setDate(validUntil.getDate() + 30);
        document.getElementById('valid-until').textContent = validUntil.toLocaleDateString();

        // Initialize with one empty item
        addNewItem();

        function addNewItem() {
            const tbody = document.getElementById('items-body');
            const row = document.createElement('tr');
            row.innerHTML = `
                <td><input type="text" class="item-desc" placeholder="Item description"></td>
                <td><input type="number" class="item-qty" value="1" min="1" onchange="calculateRow(this)"></td>
                <td><input type="number" class="entry-rate" value="0.00" step="0.01" onchange="calculateRow(this)"></td>
                <td><input type="number" class="sales-price" value="0.00" step="0.01" onchange="calculateRow(this)"></td>
                <td><input type="number" class="unit-price" value="0.00" step="0.01" onchange="calculateRow(this)"></td>
                <td><input type="number" class="discount" value="0" min="0" max="100" onchange="calculateRow(this)"></td>
                <td><input type="number" class="tax" value="0" min="0" max="100" onchange="calculateRow(this)"></td>
                <td><span class="row-total">$0.00</span></td>
                <td><button class="btn-delete" onclick="deleteRow(this)"><i class="fas fa-trash-alt"></i> Delete</button></td>
            `;
            tbody.appendChild(row);
            calculateRow(row.querySelector('.item-qty'));
            updateTotals();
        }

        function deleteRow(button) {
            const row = button.closest('tr');
            row.remove();
            updateTotals();
        }

        function calculateRow(input) {
            const row = input.closest('tr');
            const qty = parseFloat(row.querySelector('.item-qty').value) || 0;
            const entryRate = parseFloat(row.querySelector('.entry-rate').value) || 0;
            const salesPrice = parseFloat(row.querySelector('.sales-price').value) || 0;
            const unitPrice = parseFloat(row.querySelector('.unit-price').value) || 0;
            const discount = parseFloat(row.querySelector('.discount').value) || 0;
            const tax = parseFloat(row.querySelector('.tax').value) || 0;
            
            // Calculate the base price (using sales price if available, otherwise unit price)
            const basePrice = salesPrice > 0 ? salesPrice : unitPrice;
            
            // Apply discount
            const discountedPrice = basePrice * (1 - discount / 100);
            
            // Calculate total before tax
            const totalBeforeTax = qty * discountedPrice;
            
            // Apply tax
            const totalAfterTax = totalBeforeTax * (1 + tax / 100);
            
            // Update row total
            row.querySelector('.row-total').textContent = '$' + totalAfterTax.toFixed(2);
            
            updateTotals();
        }

        function updateTotals() {
            let subtotal = 0;
            let totalDiscount = 0;
            let totalTax = 0;
            
            const rows = document.querySelectorAll('#items-body tr');
            rows.forEach(row => {
                const rowTotal = parseFloat(row.querySelector('.row-total').textContent.replace('$', '')) || 0;
                const qty = parseFloat(row.querySelector('.item-qty').value) || 0;
                const basePrice = parseFloat(row.querySelector('.sales-price').value) || 
                                 parseFloat(row.querySelector('.unit-price').value) || 0;
                const discount = parseFloat(row.querySelector('.discount').value) || 0;
                const tax = parseFloat(row.querySelector('.tax').value) || 0;
                
                subtotal += rowTotal / (1 + tax / 100);
                totalDiscount += (basePrice * qty) * (discount / 100);
                totalTax += (rowTotal / (1 + tax / 100)) * (tax / 100);
            });
            
            document.getElementById('subtotal').textContent = '$' + subtotal.toFixed(2);
            document.getElementById('total-discount').textContent = '$' + totalDiscount.toFixed(2);
            document.getElementById('total-tax').textContent = '$' + totalTax.toFixed(2);
            document.getElementById('grand-total').textContent = '$' + (subtotal + totalTax).toFixed(2);
        }

        // Create Quotation function
        function createQuotation() {
            // Validate required fields
            const clientName = document.getElementById('client-name').value;
            if (!clientName) {
                alert('Please enter client name');
                return;
            }
            
            // Check if there are any items
            const items = document.querySelectorAll('#items-body tr');
            if (items.length === 0) {
                alert('Please add at least one item to the quotation');
                return;
            }
            
            // Validate that all items have descriptions
            let validItems = true;
            items.forEach((row, index) => {
                const desc = row.querySelector('.item-desc').value;
                if (!desc) {
                    alert(`Please enter description for item ${index + 1}`);
                    validItems = false;
                }
            });
            
            if (!validItems) return;
            
            // Generate a unique quotation number
            const quoteNumber = 'QT-' + new Date().getFullYear() + '-' + 
                String(new Date().getMonth() + 1).padStart(2, '0') + '-' + 
                String(new Date().getDate()).padStart(2, '0') + '-' +
                Math.floor(1000 + Math.random() * 9000);
            document.getElementById('quote-number').textContent = quoteNumber;
            
            // Show success message
            alert('Quotation created successfully!\nQuotation Number: ' + quoteNumber);
            
            // Here you could add functionality to:
            // 1. Save the quotation to a database
            // 2. Generate a PDF
            // 3. Send via email
            // 4. Print the quotation
        }

        // Submit Quotation function
        function submitQuotation() {
            // First, create the quotation if not already created
            const quoteNumber = document.getElementById('quote-number').textContent;
            if (quoteNumber === 'QT-2023-001') {
                // Quotation hasn't been created yet, so create it first
                createQuotation();
                
                // Check again if creation was successful
                if (document.getElementById('quote-number').textContent === 'QT-2023-001') {
                    return; // Creation failed
                }
            }
            
            // Validate that we have a client name
            const clientName = document.getElementById('client-name').value;
            if (!clientName) {
                alert('Please enter client name before submitting');
                return;
            }
            
            // Show submission confirmation
            const confirmation = confirm(`Are you sure you want to submit this quotation to ${clientName}?`);
            
            if (confirmation) {
                // Here you would typically:
                // 1. Send the quotation via email
                // 2. Save to database with "submitted" status
                // 3. Generate PDF and send to client
                
                alert(`Quotation ${quoteNumber} has been successfully submitted to ${clientName}!`);
                
                // Optionally reset the form or redirect
                // resetForm();
            }
        }

        // Directory functionality (remains the same as in original file)
        document.addEventListener('DOMContentLoaded', function() {
            // Directory functionality code remains unchanged
        });
    </script>
</body>
</html>