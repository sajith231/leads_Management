{% extends "base.html" %}

{% block content %}
<style>
    *{box-sizing:border-box;margin:0;padding:0}
    .vehicle-container{font-family:Segoe UI,Helvetica,Arial,sans-serif;background:#f5f5f5;padding:20px}
    .card{max-width:600px;margin:auto;background:#fff;padding:30px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,.1)}
    .card h1{text-align:center;margin-bottom:25px;color:#333}
    .grp{margin-bottom:20px}
    .grp label{display:block;margin-bottom:6px;font-weight:600;color:#555}
    input[type=text],input[type=file],input[type=number]{width:100%;padding:12px;border:2px solid #ddd;border-radius:6px;font-size:16px}
    input[type=text]:focus,input[type=file]:focus,input[type=number]:focus{outline:none;border-color:#4caf50}
    .upload-area{background:#fafafa;border:2px dashed #ccc;border-radius:8px;padding:20px;margin:25px 0}
    .upload-area h3{text-align:center;margin-bottom:15px;color:#333}
    .file-grp{margin-bottom:15px}
    .optional{color:#666;font-weight:normal;font-size:14px}
    .current-file{margin-top:5px;font-size:14px;color:#28a745}
    .btn{background:#4caf50;color:#fff;padding:14px 0;border:none;border-radius:6px;font-size:18px;width:100%;cursor:pointer;transition:.3s}
    .btn:hover{background:#45a049}
    .btn-cancel{background:#6c757d;margin-top:10px}
    .btn-cancel:hover{background:#5a6268}
</style>

<div class="vehicle-container">
    <div class="card">
        <h1>Edit Vehicle</h1>
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="grp">
                <label>Vehicle Number</label>
                <input type="text" name="vehicle_number" value="{{ vehicle.vehicle_number }}" required>
            </div>
            <div class="grp">
                <label>Owner Name</label>
                <input type="text" name="owner_name" value="{{ vehicle.owner_name }}" required>
            </div>
            <div class="grp">
                <label>Average Mileage (km/l)</label>
                <input type="number" name="avg_mileage" step="0.01" min="0" value="{{ vehicle.avg_mileage }}" required>
            </div>

            <div class="upload-area">
                <h3>Documents <span class="optional">(Optional - Leave empty to keep current files)</span></h3>
                
                <div class="file-grp">
                    <label>RC Copy <span class="optional">- Optional</span></label>
                    {% if vehicle.rc_copy %}
                        <div class="current-file">Current: <a href="{{ vehicle.rc_copy.url }}" target="_blank">{{ vehicle.rc_copy.name }}</a></div>
                    {% endif %}
                    <input type="file" name="rc_copy" accept=".pdf,.jpg,.jpeg,.png">
                </div>
                
                <div class="file-grp">
                    <label>Insurance Copy <span class="optional">- Optional</span></label>
                    {% if vehicle.insurance_copy %}
                        <div class="current-file">Current: <a href="{{ vehicle.insurance_copy.url }}" target="_blank">{{ vehicle.insurance_copy.name }}</a></div>
                    {% endif %}
                    <input type="file" name="insurance_copy" accept=".pdf,.jpg,.jpeg,.png">
                </div>
                
                <div class="file-grp">
                    <label>Pollution Copy <span class="optional">- Optional</span></label>
                    {% if vehicle.pollution_copy %}
                        <div class="current-file">Current: <a href="{{ vehicle.pollution_copy.url }}" target="_blank">{{ vehicle.pollution_copy.name }}</a></div>
                    {% endif %}
                    <input type="file" name="pollution_copy" accept=".pdf,.jpg,.jpeg,.png">
                </div>
            </div>

            <button type="submit" class="btn">Update Vehicle</button>
            <a href="{% url 'vehicle_list' %}" class="btn btn-cancel" style="text-decoration:none;display:block;text-align:center;">Cancel</a>
        </form>
    </div>
</div>
{% endblock %}